# =============================================================================
# ORFEAS AI 2Dâ†’3D Studio - Production Environment Configuration
# =============================================================================
# THERION AI Project - EREVUS Collective
#
# Production environment variables
# Copy this file to .env.production and customize values
# =============================================================================

# -----------------------------------------------------------------------------
# Flask Configuration
# -----------------------------------------------------------------------------
FLASK_ENV=production
FLASK_APP=main:app
TESTING=0
DEBUG=0
SECRET_KEY=CHANGE_ME_IN_PRODUCTION_USE_STRONG_RANDOM_STRING

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
ORFEAS_PORT=5000
HOST=0.0.0.0
WORKERS=8

# -----------------------------------------------------------------------------
# GPU Configuration
# -----------------------------------------------------------------------------
DEVICE=cuda
CUDA_VISIBLE_DEVICES=0
GPU_MEMORY_LIMIT=0.8
MAX_CONCURRENT_JOBS=3

# -----------------------------------------------------------------------------
# Model Configuration
# -----------------------------------------------------------------------------
HUNYUAN3D_PATH=/app/Hunyuan3D-2.1
MODEL_CACHE_DIR=/root/.cache/huggingface
DEFAULT_STEPS=50
MAX_STEPS=100
MIN_STEPS=10

# -----------------------------------------------------------------------------
# Performance Optimization
# -----------------------------------------------------------------------------
XFORMERS_DISABLED=1
TORCH_CUDNN_V8_API_ENABLED=1
CUDA_LAUNCH_BLOCKING=0

# -----------------------------------------------------------------------------
# File Upload Limits
# -----------------------------------------------------------------------------
MAX_FILE_SIZE=52428800
MAX_IMAGE_DIMENSION=4096
ALLOWED_IMAGE_EXTENSIONS=png,jpg,jpeg,gif,bmp,tiff,webp
ALLOWED_3D_FORMATS=stl,obj,ply,glb,gltf,fbx

# -----------------------------------------------------------------------------
# Output Configuration
# -----------------------------------------------------------------------------
OUTPUT_DIR=/app/outputs
TEMP_DIR=/app/temp
LOG_DIR=/app/logs

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# -----------------------------------------------------------------------------
# Monitoring Configuration
# -----------------------------------------------------------------------------
PROMETHEUS_PORT=9090
PROMETHEUS_ENABLED=1
METRICS_ENABLED=1

# -----------------------------------------------------------------------------
# WebSocket Configuration
# -----------------------------------------------------------------------------
WEBSOCKET_ENABLED=1
WEBSOCKET_PING_TIMEOUT=60
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_MAX_SIZE=10485760

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=1
RATE_LIMIT_PER_MINUTE=10
RATE_LIMIT_PER_HOUR=100

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
CORS_ENABLED=1
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Redis Configuration (for job queue)
# -----------------------------------------------------------------------------
REDIS_ENABLED=0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Database Configuration (future)
# -----------------------------------------------------------------------------
DATABASE_ENABLED=0
DATABASE_URL=sqlite:///orfeas.db

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
SECURITY_HEADERS_ENABLED=1
CSRF_ENABLED=0
SESSION_COOKIE_SECURE=1
SESSION_COOKIE_HTTPONLY=1
SESSION_COOKIE_SAMESITE=Lax

# -----------------------------------------------------------------------------
# Backup Configuration
# -----------------------------------------------------------------------------
BACKUP_ENABLED=1
BACKUP_INTERVAL=86400
BACKUP_RETENTION_DAYS=30
BACKUP_DIR=/app/backups

# -----------------------------------------------------------------------------
# Feature Flags
# -----------------------------------------------------------------------------
FULL_AI_MODE=1
TEXT_TO_3D_ENABLED=1
IMAGE_TO_3D_ENABLED=1
BATCH_PROCESSING_ENABLED=1
QUALITY_VALIDATION_ENABLED=1

# -----------------------------------------------------------------------------
# Advanced GPU Settings
# -----------------------------------------------------------------------------
RTX_OPTIMIZATIONS_ENABLED=1
TENSOR_CORES_ENABLED=1
MIXED_PRECISION_ENABLED=1
CUDA_GRAPHS_ENABLED=1
OPTIX_ENABLED=1

# -----------------------------------------------------------------------------
# Pipeline Configuration
# -----------------------------------------------------------------------------
PIPELINE_STAGE_TRACKING=1
PIPELINE_PROFILING=1
PIPELINE_CACHING=1

# -----------------------------------------------------------------------------
# Quality Settings
# -----------------------------------------------------------------------------
QUALITY_THRESHOLD=0.80
QUALITY_METRICS_ENABLED=1
AUTO_QUALITY_OPTIMIZATION=1

# -----------------------------------------------------------------------------
# Docker-Specific Settings
# -----------------------------------------------------------------------------
DOCKER_DEPLOYMENT=1
CONTAINER_NAME=orfeas-backend-production

# -----------------------------------------------------------------------------
# Grafana Configuration
# -----------------------------------------------------------------------------
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_IN_PRODUCTION
GF_USERS_ALLOW_SIGN_UP=false

# -----------------------------------------------------------------------------
# Nginx Configuration
# -----------------------------------------------------------------------------
NGINX_CLIENT_MAX_BODY_SIZE=100M
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=4096

# -----------------------------------------------------------------------------
# Health Check Configuration
# -----------------------------------------------------------------------------
HEALTH_CHECK_ENABLED=1
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60

# -----------------------------------------------------------------------------
# Notes
# -----------------------------------------------------------------------------
# - Change SECRET_KEY, GF_SECURITY_ADMIN_PASSWORD in production
# - For production HTTPS, update CORS_ORIGINS with actual domain
# - Adjust GPU_MEMORY_LIMIT based on your GPU (0.8 = 80% of VRAM)
# - MAX_CONCURRENT_JOBS should not exceed GPU capacity
# - Enable REDIS for production job queue management
